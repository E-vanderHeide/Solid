<!doctype html>

<!-- Similar visualisation with a clickfunction in te following link http://bl.ocks.org/fabiomainardi/9f3d5f3bbe6ee1cd4f9f-->

<html ng-app="app">
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
  <link rel="stylesheet" href="styles/main.css">
  <link rel="stylesheet" href="styles/map.css">
  <link rel="stylesheet" href="styles/bubbles.css">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
</head>
<body>
  <!-- The code for the map -->

  <div class="container-fluid">
    <div class="row-fluid">
     <div class ="col-md-6" id="canvas-map"></div>
     <div class ="col-md-6" id="canvas-bubbles"></div>
   </div>
 </div>
 <div id="tooltip-container"></div>

 <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/topojson/1.6.20/topojson.min.js"></script>
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

 <script>
   function getDataForCountry(data)
   {
    var countryData = {
      name :"",
      data:[],
      getTotalAmountOfDeaths : function(){

        var total = 0;

        $.each(this.data, function(index, value){

          total += value.D;
        });
        return total;
      },
      getTotalAmountOfMedia : function(){

        var total = 0;

        $.each(this.data, function(index, value){

          total += value.M;
        });
        return total;
      }, 
      getCorrelation : function(){
        var correlation = 0;
        var sum = 0;
        var counter = 0;
        $.each(this.data, function(index, value){
          sum += Math.abs(value.D - value.M);
          counter++;
        });
        correlation = sum / counter;
        return Math.round(correlation); 
      }
    };


    countryData.name = data.Country;
    countryData.data.push({Cause:"01", D:parseInt(data.D01), M:parseInt(data.M01)});
    countryData.data.push({Cause:"02", D:parseInt(data.D02), M:parseInt(data.M02)});
    countryData.data.push({Cause:"03", D:parseInt(data.D03), M:parseInt(data.M03)});
    countryData.data.push({Cause:"04", D:parseInt(data.D04), M:parseInt(data.M04)});
    countryData.data.push({Cause:"05", D:parseInt(data.D05), M:parseInt(data.M05)});
    countryData.data.push({Cause:"06", D:parseInt(data.D06), M:parseInt(data.M06)});
    countryData.data.push({Cause:"07", D:parseInt(data.D07), M:parseInt(data.M07)});

    return countryData;
  }

  function getDataForCountries(data)
  {
    var countries = [];
    $.each(data, function(index, value){
      countries.push(getDataForCountry(value));

    });
    return countries;
  }

  function getCountryByName(countries, name){
    var foundCountries =  $.grep(countries, function(e){ return e.name == name});
        return foundCountries[0]///>0?foundCountries[0]: false;
  }


  var selectedCountry;

  var countries = [];
  

</script>
<script  type="text/javascript" src="app/components/map/mapController.js"></script>
<script  type="text/javascript" src="app/components/bubbles/bubbleController.js"></script>
</body>
</html>

